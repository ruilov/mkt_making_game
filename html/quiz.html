<link href="/css/quiz.css" rel="stylesheet">
<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

<div class="container">
  <div class="row">
    <div class="col-md-12 site">
      <div class="site-title">
        <div ng-switch="state">
          <div ng-switch-when="filled">
            <a href="/#/rankings"><h2><b><u>{{quiz.title}}</u></b></h2></a>
          </div>
          <div ng-switch-default>
            <h2><b>{{quiz.title}}</b></h2>
          </div>
        </div>
      </div>

      <form name="quiz_form" class="form-inline">
        
        <div class="post" ng-repeat="question in quiz.questions">
          <div class="row">
            <div class="col-md-7 question">
              <h4>{{question.text}}</h4>
              <small>Source: {{question.source}}</small>
            </div>

            <div ng-switch="state">
              <!-- USER HAS ALREADY FILLED OUT THE QUIZ -->
              <div ng-switch-when="filled">
                <div class="bid form-group col-sm-1" align="center">
                  <p><b>Bid</b></p>
                  {{question.guess_low}}
                </div>

                <div class="form-group col-sm-1" align="center">
                    <p><b>Offer</b></p>
                    {{question.guess_high}}
                </div>

                <div class="form-group col-sm-1" align="center">
                  <p><b>Answer</b></p>
                  <div ng-switch="question.status">
                    <div class="right-answer" ng-switch-when="No trade">{{question.answer}}</div>
                    <div class="wrong-answer" ng-switch-default>{{question.answer}}</div>
                  </div>
                </div>

                <div class="rating" class="form-group col-md-1" align="center">
                  <p><b>Rate the questions</b></p>
                  <div star-rating question-num="$index" rating-value="question.rating" max="5" on-rating-selected="rateQuestion($index,rating)"></div>
                </div>
              </div>

              <!-- USER WILL FILL OUT THE QUIZ -->
              <div ng-switch-default>
                <div class="form-group col-sm-2" align="center">
                  <p><b>Bid</b></p>
                  <input type="text" class="form-control input-sm" style="text-align: center" ng-model="question.guess_low" required format>
                </div>

                <div class="form-group col-md-2" align="center">
                  <p><b>Offer</b></p>
                  <input type="text" class="form-control input-sm" style="text-align: center" ng-model="question.guess_high" required format>
                </div>
              </div>

            </div>
          </div>
        </div>

        <div ng-switch="state">
          <div ng-switch-when="to_fill" align="right" class="post">
            <div class="submit-container">
              <a href={{quiz.url}} class="btn btn-primary" ng-disabled="quiz_form.$invalid" ng-click="submit()"><div class="submit">Submit</div></a>
            </div>
          </div>
          <div ng-switch-default></div>
        </div>
      </div>
    </div>
  </div>
</div>

